function DateController(e,o,t,r,a){function l(o){e.getDatesGames(o).then(function(e){t.debug("datesGameList response is ",e),i.logoUrl=e.logoUrl,i.long_date=e.long_date,i.season=e.season,i.prevDate=e.prevDate,i.nextDate=e.nextDate,i.prev_long=e.prevDate_long,i.next_long=e.nextDate_long,e.error?i.error=e.error:i.gameList=e.games})}function n(){e.getTodaysGames().then(function(e){t.debug("todaysGamesList response is ",e),i.logoUrl=e.logoUrl,i.long_date=e.long_date,i.season=e.season,i.prevDate=e.prevDate,i.nextDate=e.nextDate,i.prev_long=e.prevDate_long,i.next_long=e.nextDate_long,e.error?i.error=e.error:i.gameList=e.games})}var s,i=this;a.today?(console.log("requesting todays games"),s=o(n,1e4),n()):(console.log("requesting games for "+a.dateToGet),o.cancel(s),l(a.dateToGet)),r.$on("$destroy",function(){o.cancel(s)})}function FlowController(e,o,t,r,a){function l(r){e.getScoreFlow(r).then(function(e){t.debug("getScoreFlow response is ",e),e.error?s.error=e.error:(s.score_elements=e.score_elements,s.game_id=e.game_id,s.away_team=e.away_team,s.home_team=e.home_team,s.gamecode=e.gamecode,s.game_status=e.game_status,s.game_status_id=e.game_status_id,t.debug("game status: ",s.game_status),3==s.game_status_id?(t.debug("cancelling the flowLoader"),o.cancel(i)):1==s.game_status_id?(t.debug("game hasn't started yet - cancelling loader and setting a new one for 10 minutes"),o.cancel(i),i=o(n,6e5)):2==c&&(t.debug("game has started, but the loader is still set to 10 minutes"),o.cancel(i),i=o(n,1e4)),s.marginData={type:"mixed",plot:{styles:e.margColor,"border-radius":"9px"},"scale-x":{labels:e.timeStamps,"max-items":8,zooming:!0,"zoom-snap":!0},"scale-y":{label:{text:"Score Flow",fontColor:"#333333"},zooming:!0,"zoom-snap":!0},"scale-y-2":{label:{text:"Score Margin"},multiplier:!0,decimals:0},"scroll-x":{bar:{height:"10px"}},"scroll-y":{bar:{width:"10px"}},series:[{type:"bar",values:e.margins,scales:"scale-x,scale-y-2"},{type:"line","line-color":e.homeColor,marker:{"background-color":e.homeColor},values:e.homeFlow},{type:"line","line-color":e.awayColor,marker:{"background-color":e.awayColor},values:e.awayFlow}]})})}function n(){t.debug("calling loadScoreFlow with game_id of ",g),l(g)}var s=this;s.logoUrl="http://i.cdn.turner.com/nba/nba/.element/img/2.0/sect/gameinfo/teamlogos";var i,c=0,g=a.game_id;l(g),i=o(n,1e4),r.$on("$destroy",function(){o.cancel(i)})}!function(){angular.module("bewd.nba-vis",["bewd.nba-vis.date-controller","bewd.nba-vis.flow-controller","ngRoute"]).config(["$locationProvider","$routeProvider",function(e,o){e.html5Mode(!0),o.when("/gamedate",{templateUrl:"/partials/dateView",controller:"DateController",controllerAs:"vm",resolve:{startValues:function(){return{today:!0}}},bindToController:!0}),o.when("/gamedate/:requestedDate",{templateUrl:"/partials/dateView",controller:"DateController",controllerAs:"vm",resolve:{startValues:["$route",function(e){return{dateToGet:e.current.params.requestedDate}}]},bindToController:!0}),o.when("/gameflow/",{templateUrl:"/partials/gameFlow",controller:"FlowController",controllerAs:"vm",resolve:{startValues:["$route",function(e){return{game_id:""}}]},bindToController:!0}),o.when("/gameflow/:game_id",{templateUrl:"/partials/gameFlow",controller:"FlowController",controllerAs:"vm",resolve:{startValues:["$route",function(e){return{game_id:e.current.params.game_id}}]},bindToController:!0}),o.when("/",{templateUrl:"/partials/dateView",controller:"DateController",controllerAs:"vm",resolve:{startValues:function(){return{today:!0}}},bindToController:!0})}])}(),angular.module("bewd.nba-vis.date-controller",[]),angular.module("bewd.nba-vis.date-controller").factory("dateControllerService",["$http",function(e){return{getTodaysGames:function(){return e.get("/date").then(function(e){return e.data})},getDatesGames:function(o){return e.get("/date/"+o).then(function(e){return e.data})}}}]).controller("DateController",DateController),DateController.$inject=["dateControllerService","$interval","$log","$scope","startValues"],angular.module("bewd.nba-vis.flow-controller",["zingchart-angularjs"]),angular.module("bewd.nba-vis.flow-controller").factory("flowControllerService",["$http",function(e){return{getScoreFlow:function(o){return e.get("/scoreflow/"+o).then(function(e){return e.data})}}}]).controller("FlowController",FlowController),FlowController.$inject=["flowControllerService","$interval","$log","$scope","startValues"];