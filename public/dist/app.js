function DateController(e,t,o,r,a){function n(t){e.getDatesGames(t).then(function(e){o.debug("datesGameList response is ",e),i.logoUrl=e.logoUrl,i.long_date=e.long_date,i.season=e.season,i.prevDate=e.prevDate,i.nextDate=e.nextDate,i.prev_long=e.prevDate_long,i.next_long=e.nextDate_long,e.error?i.error=e.error:i.gameList=e.games})}function l(){e.getTodaysGames().then(function(e){o.debug("todaysGamesList response is ",e),i.logoUrl=e.logoUrl,i.long_date=e.long_date,i.season=e.season,i.prevDate=e.prevDate,i.nextDate=e.nextDate,i.prev_long=e.prevDate_long,i.next_long=e.nextDate_long,e.error?i.error=e.error:i.gameList=e.games})}var s,i=this;a.today?(console.log("requesting todays games"),s=t(l,1e4),l()):(console.log("requesting games for "+a.dateToGet),t.cancel(s),n(a.dateToGet)),r.$on("$destroy",function(){t.cancel(s)})}function FlowController(e,t,o,r,a){function n(r){e.getScoreFlow(r).then(function(e){o.debug("getScoreFlow response is ",e),e.error?s.error=e.error:(s.score_elements=e.score_elements,s.game_id=e.game_id,s.away_team=e.away_team,s.home_team=e.home_team,s.gamecode=e.gamecode,s.game_status=e.game_status,s.game_status_id=e.game_status_id,o.debug("game status: ",s.game_status),3==s.game_status_id?(o.debug("cancelling the flowLoader"),t.cancel(i)):1==s.game_status_id?(o.debug("game hasn't started yet - cancelling loader and setting a new one for 10 minutes"),t.cancel(i),i=t(l,6e5)):2==g&&(o.debug("game has started, but the loader is still set to 10 minutes"),t.cancel(i),i=t(l,1e4)),s.marginData={type:"waterfall",plot:{styles:e.margColor},series:[{values:e.margins,"offset-values":e.offsetFlow}]})})}function l(){o.debug("calling loadScoreFlow with game_id of ",c),n(c)}var s=this;s.logoUrl="http://i.cdn.turner.com/nba/nba/.element/img/2.0/sect/gameinfo/teamlogos";var i,g=0,c=a.game_id;n(c),i=t(l,1e4),r.$on("$destroy",function(){t.cancel(i)})}!function(){angular.module("bewd.nba-vis",["bewd.nba-vis.date-controller","bewd.nba-vis.flow-controller","ngRoute"]).config(["$locationProvider","$routeProvider",function(e,t){e.html5Mode(!0),t.when("/gamedate",{templateUrl:"/partials/dateView",controller:"DateController",controllerAs:"vm",resolve:{startValues:function(){return{today:!0}}},bindToController:!0}),t.when("/gamedate/:requestedDate",{templateUrl:"/partials/dateView",controller:"DateController",controllerAs:"vm",resolve:{startValues:["$route",function(e){return{dateToGet:e.current.params.requestedDate}}]},bindToController:!0}),t.when("/gameflow/",{templateUrl:"/partials/gameFlow",controller:"FlowController",controllerAs:"vm",resolve:{startValues:["$route",function(e){return{game_id:""}}]},bindToController:!0}),t.when("/gameflow/:game_id",{templateUrl:"/partials/gameFlow",controller:"FlowController",controllerAs:"vm",resolve:{startValues:["$route",function(e){return{game_id:e.current.params.game_id}}]},bindToController:!0}),t.when("/",{templateUrl:"/partials/dateView",controller:"DateController",controllerAs:"vm",resolve:{startValues:function(){return{today:!0}}},bindToController:!0})}])}(),angular.module("bewd.nba-vis.date-controller",[]),angular.module("bewd.nba-vis.date-controller").factory("dateControllerService",["$http",function(e){return{getTodaysGames:function(){return e.get("/date").then(function(e){return e.data})},getDatesGames:function(t){return e.get("/date/"+t).then(function(e){return e.data})}}}]).controller("DateController",DateController),DateController.$inject=["dateControllerService","$interval","$log","$scope","startValues"],angular.module("bewd.nba-vis.flow-controller",["zingchart-angularjs"]),angular.module("bewd.nba-vis.flow-controller").factory("flowControllerService",["$http",function(e){return{getScoreFlow:function(t){return e.get("/scoreflow/"+t).then(function(e){return e.data})}}}]).controller("FlowController",FlowController),FlowController.$inject=["flowControllerService","$interval","$log","$scope","startValues"];